(()=>{var e,t={723:(e,t,o)=>{"use strict";const a=window.wp.blocks,r=window.wp.data,l=window.wp.i18n,i=window.wp.element;var s=o(184),c=o.n(s);const m=window.lodash,b=[{attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},backgroundColor:{type:"string"},id:{type:"number"},book_review_author:{type:"string",source:"meta",meta:"book_review_author"},book_review_cover_url:{type:"string",source:"meta",meta:"book_review_cover_url"},book_review_format:{type:"string",source:"meta",meta:"book_review_format"},book_review_genre:{type:"string",source:"meta",meta:"book_review_genre"},book_review_isbn:{type:"string",source:"meta",meta:"book_review_isbn"},book_review_pages:{type:"string",source:"meta",meta:"book_review_pages"},book_review_publisher:{type:"string",source:"meta",meta:"book_review_publisher"},book_review_rating:{type:"string",source:"meta",meta:"book_review_rating"},book_review_release_date:{type:"string",source:"meta",meta:"book_review_release_date"},book_review_series:{type:"string",source:"meta",meta:"book_review_series"},book_review_source:{type:"string",source:"meta",meta:"book_review_source"},book_review_summary:{type:"string",source:"meta",meta:"book_review_summary"},book_review_title:{type:"string",source:"meta",meta:"book_review_title"}},migrate:(e,t)=>[{...(0,m.pick)(e,["backgroundColor","id"]),isbn:e.book_review_isbn},[(0,a.createBlock)("core/image",{alt:e.alt,url:e.book_review_cover_url}),(0,a.createBlock)("book-review-block/metadata",{author:e.book_review_author,format:e.book_review_format,genre:e.book_review_genre,pages:e.book_review_pages,publisher:e.book_review_publisher,releaseDate:e.book_review_release_date,series:e.book_review_series,source:e.book_review_source,title:e.book_review_title}),(0,a.createBlock)("book-review-block/rating",{rating:e.book_review_rating}),(0,a.createBlock)("book-review-block/description",{summary:e.book_review_summary}),...t]],save:e=>null},{attributes:{alt:{type:"string",source:"attribute",selector:"img",attribute:"alt"},author:{type:"array",source:"children",selector:".book-review-block__author"},backgroundColor:{type:"string"},format:{type:"array",source:"children",selector:".book-review-block__format"},genre:{type:"array",source:"children",selector:".book-review-block__genre"},pages:{type:"array",source:"children",selector:".book-review-block__pages"},publisher:{type:"array",source:"children",selector:".book-review-block__publisher"},rating:{type:"string"},releaseDate:{type:"array",source:"children",selector:".book-review-block__release-date"},series:{type:"array",source:"children",selector:".book-review-block__series"},source:{type:"array",source:"children",selector:".book-review-block__source"},summary:{type:"array",source:"children",selector:".book-review-block__description"},title:{type:"array",source:"children",selector:".book-review-block__title"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"}},migrate:e=>[(0,m.pick)(e,["backgroundColor"]),[(0,a.createBlock)("core/image",{align:"left",alt:e.alt,url:e.url}),(0,a.createBlock)("book-review-block/metadata",{author:e.author,format:e.format,genre:e.genre,pages:e.pages,publisher:e.publisher,releaseDate:e.releaseDate,series:e.series,source:e.source,title:e.title}),(0,a.createBlock)("book-review-block/rating",{rating:Number(e.rating,10)}),(0,a.createBlock)("book-review-block/description",{summary:e.summary})]],save(e){let{attributes:t}=e;const{alt:o,author:a=[],backgroundColor:r,format:l=[],genre:s=[],pages:m=[],publisher:b=[],rating:n,releaseDate:k=[],series:_=[],source:v=[],summary:u=[],title:w=[],url:p}=t,d=c()("book-review-block",{"has-background":r}),g={backgroundColor:r};return(0,i.createElement)("div",{className:d,style:g},!!p&&(0,i.createElement)("div",{className:"book-review-block__cover-wrapper"},(0,i.createElement)("img",{className:"book-review-block__cover",src:p,alt:o})),(0,i.createElement)("div",{className:"book-review-block__details"},w.length>0&&(0,i.createElement)("span",{className:"book-review-block__title"},w),_.length>0&&(0,i.createElement)("span",{className:"book-review-block__series"},_),a.length>0&&(0,i.createElement)("span",{className:"book-review-block__author"},a),s.length>0&&(0,i.createElement)("span",{className:"book-review-block__genre"},s),b.length>0&&(0,i.createElement)("span",{className:"book-review-block__publisher"},b),k.length>0&&(0,i.createElement)("span",{className:"book-review-block__release-date"},k),l.length>0&&(0,i.createElement)("span",{className:"book-review-block__format"},l),m.length>0&&(0,i.createElement)("span",{className:"book-review-block__pages"},m),v.length>0&&(0,i.createElement)("span",{className:"book-review-block__source"},v),(0,i.createElement)("div",{className:"book-review-block__rating"},[{rating:5},{rating:4},{rating:3},{rating:2},{rating:1}].map((e=>{let{rating:t}=e;return(0,i.createElement)("span",{className:n&&t<=n?"on":"off","data-rating":t,key:t},"â˜†")}))),u.length>0&&(0,i.createElement)("div",{className:"book-review-block__description"},u)))}}],n=window.wp.components,k=JSON.parse('{"name":"book-review-block/book-review","title":"Book Review","description":"Add details such as title, author, cover image, star rating and more to your book reviews.","category":"widgets","keywords":["book report","literature","literary critique","read","written work"],"textdomain":"book-review-block","attributes":{"backgroundColor":{"type":"string"},"isbn":{"type":"string"}},"editorScript":"file:../../build/index.js","editorStyle":"file:../../build/index.css","style":"file:../../build/style-index.css"}'),_=window.wp.coreData,v=window.wp.date,u=window.wp.blockEditor,w=["core/image","book-review-block/metadata","book-review-block/rating","book-review-block/description"],p=[["core/image",{align:"left"}],["book-review-block/metadata"],["book-review-block/rating"],["book-review-block/description"]],d=(0,i.createElement)(i.Fragment,null,(0,i.createElement)(n.ExternalLink,{href:"https://console.developers.google.com/flows/enableapi?apiid=books.googleapis.com&keyType=CLIENT_SIDE&reusekey=true"},(0,l.__)("Get an API key.","book-review-block")),(0,l.__)("Note that changing the API key affects all Book Review blocks.","book-review-block")),g=JSON.parse('{"name":"book-review-block/description","title":"Description","description":"Add a brief description of the book.","category":"widgets","icon":"media-text","parent":["book-review-block/book-review"],"keywords":["book","summary","synopsis"],"textdomain":"book-review-block","attributes":{"summary":{"type":"string","source":"html","selector":".book-review-block__description","multiline":"p"}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}'),{name:h,...y}=g;(0,a.registerBlockType)(h,{...y,edit:e=>{let{attributes:t,setAttributes:o}=e;const{summary:a}=t,s=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[c]=(0,_.useEntityProp)("postType",s,"meta");return(0,i.useEffect)((()=>{c.book_review_title&&o({summary:c.book_review_summary})}),[c]),(0,i.createElement)("div",{className:"book-review-block__description"},(0,i.createElement)(u.RichText,{multiline:"p",onChange:e=>o({summary:e}),placeholder:(0,l.__)("Description"),value:a,inlineToolbar:!0}))},save:e=>{let{attributes:t}=e;const{summary:o}=t;return(0,i.createElement)("div",{className:"book-review-block__description"},(0,i.createElement)(u.RichText.Content,{multiline:"p",value:o}))}});const E=JSON.parse('{"name":"book-review-block/metadata","title":"Metadata","description":"Add book details such as title and author.","category":"widgets","icon":"info","parent":["book-review-block/book-review"],"keywords":["book","author","format","genre","pages","publisher","release date","series","source","title"],"textdomain":"book-review-block","attributes":{"author":{"type":"string","source":"html","selector":".book-review-block__meta-item-author .book-review-block__meta-item-value","default":""},"format":{"type":"string","source":"html","selector":".book-review-block__meta-item-format .book-review-block__meta-item-value","default":""},"genre":{"type":"string","source":"html","selector":".book-review-block__meta-item-genre .book-review-block__meta-item-value","default":""},"pages":{"type":"string","source":"html","selector":".book-review-block__meta-item-pages .book-review-block__meta-item-value","default":""},"publisher":{"type":"string","source":"html","selector":".book-review-block__meta-item-publisher .book-review-block__meta-item-value","default":""},"releaseDate":{"type":"string","source":"html","selector":".book-review-block__meta-item-release-date .book-review-block__meta-item-value","default":""},"series":{"type":"string","source":"html","selector":".book-review-block__meta-item-series .book-review-block__meta-item-value","default":""},"source":{"type":"string","source":"html","selector":".book-review-block__meta-item-source .book-review-block__meta-item-value","default":""},"title":{"type":"string","source":"html","selector":".book-review-block__meta-item-title .book-review-block__meta-item-value","default":""},"showLabels":{"type":"boolean","default":false}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}'),f=[{attributes:{author:{type:"string",source:"html",selector:".book-review-block__meta-item-author .book-review-block__meta-item-value",default:""},format:{type:"string",source:"html",selector:".book-review-block__meta-item-format .book-review-block__meta-item-value",default:""},genre:{type:"string",source:"html",selector:".book-review-block__meta-item-genre .book-review-block__meta-item-value",default:""},pages:{type:"string",source:"html",selector:".book-review-block__meta-item-pages .book-review-block__meta-item-value",default:""},publisher:{type:"string",source:"html",selector:".book-review-block__meta-item-publisher .book-review-block__meta-item-value",default:""},releaseDate:{type:"string",source:"html",selector:".book-review-block__meta-item-release-date .book-review-block__meta-item-value",default:""},series:{type:"string",source:"html",selector:".book-review-block__meta-item-series .book-review-block__meta-item-value",default:""},source:{type:"string",source:"html",selector:".book-review-block__meta-item-source .book-review-block__meta-item-value",default:""},title:{type:"string",source:"html",selector:".book-review-block__meta-item-title .book-review-block__meta-item-value",default:""},showLabels:{type:"boolean",default:!1}},save(e){let{attributes:t}=e;const{author:o,format:a,genre:r,pages:s,publisher:c,releaseDate:m,series:b,showLabels:n,source:k,title:_}=t;return(0,i.createElement)("div",{className:"book-review-block__meta"},(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Title:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:_,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Series:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:b,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Person",itemprop:"author",className:"book-review-block__meta-item book-review-block__meta-item-author"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Author:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:o,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Genre:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"genre",value:r,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Organization",itemprop:"publisher",className:"book-review-block__meta-item book-review-block__meta-item-publisher"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Publisher:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:c,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Release Date:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"datePublished",value:m,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Format:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:a,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Pages:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"numberOfPages",value:s,className:"book-review-block__meta-item-value",tagName:"div"})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Source:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:k,className:"book-review-block__meta-item-value",tagName:"div"})))}}],{name:N,...C}=E;(0,a.registerBlockType)(N,{...C,edit:e=>{let{attributes:t,setAttributes:o}=e;const{author:a,format:s,genre:c,pages:m,publisher:b,releaseDate:k,series:v,showLabels:w,source:p,title:d}=t,g=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[h]=(0,_.useEntityProp)("postType",g,"meta");(0,i.useEffect)((()=>{h.book_review_title&&(o({title:h.book_review_title}),o({series:h.book_review_series}),o({author:h.book_review_author}),o({genre:h.book_review_genre}),o({publisher:h.book_review_publisher}),o({releaseDate:h.book_review_release_date}),o({format:h.book_review_format}),o({pages:h.book_review_pages}),o({source:h.book_review_source}))}),[h]);const y=e=>t=>{o({[e]:t})};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(u.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,l.__)("Content","book-review-block")},(0,i.createElement)(n.ToggleControl,{label:(0,l.__)("Show labels","book-review-block"),help:(0,l.__)("Whether to show labels beside each piece of metadata","book-review-block"),checked:w,onChange:()=>o({showLabels:!w})}))),(0,i.createElement)("div",{className:"book-review-block__meta"},(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Title:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write titleâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("title"),value:d})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Series:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write seriesâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("series"),value:v})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-author"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Author:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write authorâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("author"),value:a})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Genre:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write genreâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("genre"),value:c})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-publisher"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Publisher:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write publisherâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("publisher"),value:b})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Release Date:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write release dateâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:e=>o({releaseDate:e}),value:k})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Format:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write formatâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("format"),value:s})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Pages:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write pagesâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("pages"),value:m})),(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},w&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Source:","book-review-block")),(0,i.createElement)(u.RichText,{placeholder:(0,l.__)("Write sourceâ€¦","book-review-block"),className:"book-review-block__meta-item-value",onChange:y("source"),value:p}))))},save:e=>{let{attributes:t}=e;const{author:o,format:a,genre:r,pages:s,publisher:c,releaseDate:m,series:b,showLabels:n,source:k,title:_}=t;return(0,i.createElement)("div",{className:"book-review-block__meta"},_&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-title"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Title:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:_,className:"book-review-block__meta-item-value",tagName:"div"})),b&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-series"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Series:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:b,className:"book-review-block__meta-item-value",tagName:"div"})),o&&(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Person",itemprop:"author",className:"book-review-block__meta-item book-review-block__meta-item-author"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Author:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:o,className:"book-review-block__meta-item-value",tagName:"div"})),r&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-genre"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Genre:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"genre",value:r,className:"book-review-block__meta-item-value",tagName:"div"})),c&&(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Organization",itemprop:"publisher",className:"book-review-block__meta-item book-review-block__meta-item-publisher"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Publisher:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"name",value:c,className:"book-review-block__meta-item-value",tagName:"div"})),m&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-release-date"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Release Date:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"datePublished",value:m,className:"book-review-block__meta-item-value",tagName:"div"})),a&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-format"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Format:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:a,className:"book-review-block__meta-item-value",tagName:"div"})),s&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-pages"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Pages:","book-review-block")),(0,i.createElement)(u.RichText.Content,{itemprop:"numberOfPages",value:s,className:"book-review-block__meta-item-value",tagName:"div"})),k&&(0,i.createElement)("div",{className:"book-review-block__meta-item book-review-block__meta-item-source"},n&&(0,i.createElement)("span",{className:"book-review-block__meta-item-label"},(0,l.__)("Source:","book-review-block")),(0,i.createElement)(u.RichText.Content,{value:k,className:"book-review-block__meta-item-value",tagName:"div"})))},deprecated:f});const x=JSON.parse('{"name":"book-review-block/rating","title":"Rating","description":"Add a star rating.","category":"widgets","icon":"star-filled","parent":["book-review-block/book-review"],"keywords":["book","star"],"textdomain":"book-review-block","attributes":{"rating":{"type":"number","default":1}},"editorScript":"file:../../../build/index.js","editorStyle":"file:../../../build/index.css","style":"file:../../../build/style-index.css"}'),S=(window.wp.apiFetch,window.wp.keycodes),T=e=>{const t=(e=>e&&e.className?e.className:"")(e);return(0,i.createElement)(n.SVG,{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",color:"#eba845"},(0,i.createElement)(n.Path,{className:t,fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))},B=e=>{let{id:t,setRating:o,children:a}=e;return(0,i.createElement)("span",{className:"book-review-block__rating-button",role:"button",tabIndex:0,onKeyDown:(r=t,e=>{let{keyCode:t}=e;return t===S.ENTER?o(r):null}),onClick:(e=>()=>o(e))(t)},a);var r},{name:R,...P}=x;(0,a.registerBlockType)(R,{...P,edit:e=>{let{attributes:t,setAttributes:o}=e;const{rating:a}=t,l=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[s]=(0,_.useEntityProp)("postType",l,"meta");(0,i.useEffect)((()=>{s.book_review_title&&o({rating:s.book_review_rating?Number(s.book_review_rating,10):1})}),[s]);const c=e=>{e===a&&Math.ceil(a)===a&&(e-=.5),o({rating:e})};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"book-review-block__rating book-review-block__review-rating"},(0,i.createElement)("div",{className:"book-review-block__rating-buttons"},(0,m.range)(1,6).map((e=>(0,i.createElement)(B,{key:e,id:e,setRating:c},(0,i.createElement)("span",null,(0,i.createElement)(T,{className:a>=e-.5?null:"is-rating-unfilled"})),(0,i.createElement)("span",null,(0,i.createElement)(T,{className:a>=e?null:"is-rating-unfilled"}))))))))},save:e=>{let{attributes:t}=e;const{rating:o}=t;return(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Review",itemprop:"review"},(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Rating",itemprop:"reviewRating",className:"book-review-block__rating book-review-block__review-rating"},(0,i.createElement)("meta",{itemprop:"ratingValue",content:o}),(0,i.createElement)("div",{className:"book-review-block__rating-buttons"},(0,m.range)(1,6).map((e=>(0,i.createElement)("span",{className:"book-review-block__rating-button",key:e,role:"button",tabIndex:0},(0,i.createElement)("span",null,(0,i.createElement)("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,i.createElement)("path",{className:o>=e-.5?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"}))),(0,i.createElement)("span",null,(0,i.createElement)("svg",{xmlns:"https://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,i.createElement)("path",{className:o>=e?null:"is-rating-unfilled",fill:"#eba845",stroke:"#eba845",d:"M12,17.3l6.2,3.7l-1.6-7L22,9.2l-7.2-0.6L12,2L9.2,8.6L2,9.2L7.5,14l-1.6,7L12,17.3z"})))))))))}});const{name:I,...L}=k;(0,r.dispatch)("core").addEntities([{baseURL:"/book-review-block/v1/settings",kind:"book-review-block/v1",name:"settings"}]),(0,a.registerBlockType)(I,{...L,icon:e=>{let{className:t}=e;return(0,i.createElement)(n.Icon,{className:t,icon:(0,i.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"https://www.w3.org/2000/svg"},(0,i.createElement)("path",{d:"M2.3,17.3h9.3c0.1,0,0.3,0,0.4,0.1l5.9,4.2c0.3,0.2,0.7,0,0.7-0.3v-3.7c0-0.2,0.2-0.4,0.4-0.4H22 c1.1,0,2-0.9,2-2V2.5c0-1.2-0.7-2.2-2-2.2H2.3C0.7,0.2,0,0.9,0,2.5v12.3C0,16.3,0.7,17.3,2.3,17.3z"}),(0,i.createElement)("polygon",{fill:"#ffffff",points:"8.8,12.1 6.5,10.9 4.1,12.1 4.5,9.5 2.6,7.6 5.3,7.2 6.5,4.8 7.6,7.2 10.3,7.6 8.4,9.5"}),(0,i.createElement)("path",{fill:"#ffffff",d:"M20.7,7.9h-7c-0.5,0-0.9-0.4-0.9-0.9S13.2,6,13.7,6h7c0.5,0,0.9,0.4,0.9,0.9S21.2,7.9,20.7,7.9z"}),(0,i.createElement)("path",{fill:"#ffffff",d:"M20.7,11.5h-7c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h7c0.5,0,0.9,0.4,0.9,0.9S21.2,11.5,20.7,11.5z"}))})},supports:{align:["wide","full"]},example:{innerBlocks:[{name:"core/image",attributes:{align:"left",height:300,url:"http://books.google.com/books/content?id=sJdUAzLUNyAC&printsec=frontcover&img=1&zoom=1&source=gbs_api"}},{name:"book-review-block/metadata",attributes:{author:"Suzanne Collins",format:"Hardcover",genre:"Young Adult",pages:"374",publisher:"Scholastic Press",releaseDate:"September 14, 2008",series:"The Hunger Games #1",source:" ",title:"The Hunger Games"}},{name:"book-review-block/rating",attributes:{rating:4.5}},{name:"book-review-block/description",attributes:{summary:"<p>In a future North America, where the rulers of Panem maintain control through an annual televised survival competition pitting young people from each of the twelve districts against one another, sixteen-year-old Katniss's skills are put to the test when she voluntarily takes her younger sister's place.</p>"}}]},edit:function(e){let{attributes:t,className:o,clientId:a,isSelected:s,setAttributes:m}=e;const{backgroundColor:b,isbn:k,url:g}=t,h=c()(o,"book-review-block",{"has-background":b}),[y,E]=(0,i.useState)(!1),[f,N]=(0,i.useState)(!1),[C,x]=(0,i.useState)(!1),[S,T]=(0,i.useState)(""),[B,R]=(0,i.useState)(""),[P,I]=(0,i.useState)(""),[L]=(0,_.useEntityProp)("root","site","date_format"),A=(0,r.useSelect)((e=>e("core").getEntityRecord("book-review-block/v1","settings",void 0)),[]),D=(0,r.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[O]=(0,_.useEntityProp)("postType",D,"meta");return(0,i.useEffect)((()=>{A&&A.book_review_api_key&&I(A.book_review_api_key)}),[A]),(0,i.useEffect)((()=>{if(O.book_review_isbn&&m({isbn:O.book_review_isbn}),O.book_review_cover_url){const e=(0,r.select)("core/block-editor").getBlocksByClientId(a);if(!e.length||!e[0].innerBlocks)return;m({url:O.book_review_cover_url}),e[0].innerBlocks.forEach((e=>{"core/image"===e.name&&(0,r.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{align:"left",url:O.book_review_cover_url})}))}}),[O]),(0,i.createElement)("div",{className:h,style:{backgroundColor:b}},s&&(0,i.createElement)(u.InspectorControls,{key:"inspector"},(0,i.createElement)(u.PanelColorSettings,{colorSettings:[{value:b&&b.value,onChange:e=>m({backgroundColor:e}),label:(0,l.__)("Background Color")}]}),A&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(n.PanelBody,{title:(0,l.__)("ISBN","book-review-block"),initialOpen:!1},C&&(0,i.createElement)(n.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,l.__)("A book with that ISBN was not found.","book-review-block")),S&&(0,i.createElement)(n.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,l.__)(S,"book-review-block")),(0,i.createElement)(n.TextControl,{help:(0,l.__)("Enter the ISBN to automatically fill in the book details. You will need to have an API key first.","book-review-block"),placeholder:(0,l.__)("ISBN","book-review-block"),value:k||"",onChange:e=>m({isbn:e})}),(0,i.createElement)("div",null,(0,i.createElement)(n.Button,{isSecondary:!0,disabled:!k||!P,onClick:async()=>{const e=`https://www.googleapis.com/books/v1/volumes?q=isbn:${k}&key=${encodeURIComponent(P)}`;E(!0),x(!1),T(""),await fetch(e).then((e=>e.json())).then((e=>{if(!e)return;const t=e.items?.[0].volumeInfo;if(t){const e=(0,r.select)("core/block-editor").getBlocksByClientId(a);if(!e.length||!e[0].innerBlocks)return;e[0].innerBlocks.forEach((e=>{switch(e.name){case"core/image":(0,r.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{url:t.imageLinks?.thumbnail?t.imageLinks.thumbnail:""});break;case"book-review-block/metadata":(0,r.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{author:t.authors&&t.authors.length?t.authors.join():"",genre:t.categories&&t.categories.length?t.categories.join():"",pages:t.pageCount?t.pageCount.toString():"",publisher:t.publisher?t.publisher:"",releaseDate:t.publishedDate?(0,v.dateI18n)(L,t.publishedDate):"",series:"",title:t.title?t.title:""});break;case"book-review-block/description":(0,r.dispatch)("core/block-editor").updateBlockAttributes(e.clientId,{summary:t.description?"<p>"+t.description+"</p>":""})}}))}else e.error?.message?T(e.error.message):e.items||x(!0)})).catch((e=>{T(e)})).finally((()=>{E(!1)}))}},(0,l.__)("Get Book Details","book-review-block")),y&&(0,i.createElement)(n.Spinner,null))),(0,i.createElement)(n.PanelBody,{title:(0,l.__)("API Key","book-review-block"),initialOpen:!1},B&&(0,i.createElement)(n.Notice,{className:"book-review-block__sidebar-notice",status:"error",isDismissible:!1},(0,l.__)(B,"book-review-block")),(0,i.createElement)(n.TextControl,{help:d,placeholder:(0,l.__)("API Key","book-review-block"),value:P,onChange:e=>I(e)}),(0,i.createElement)("div",null,(0,i.createElement)(n.Button,{isSecondary:!0,disabled:!P,onClick:()=>{const{saveEntityRecord:e}=(0,r.dispatch)("core");N(!0),e("book-review-block/v1","settings",{book_review_api_key:P}).catch((e=>{R(e)})).finally((()=>{N(!1)}))}},(0,l.__)("Save API Key","book-review-block")),f&&(0,i.createElement)(n.Spinner,null))))),(0,i.createElement)(u.InnerBlocks,{allowedBlocks:w,template:p}))},save:e=>{let{attributes:t}=e;const{backgroundColor:o,isbn:a}=t,r=c()("book-review-block",{"has-background":o});return(0,i.createElement)("div",{itemscope:!0,itemtype:"https://schema.org/Book",className:r,style:{backgroundColor:o}},a&&(0,i.createElement)("meta",{itemprop:"isbn",content:a}),(0,i.createElement)(u.InnerBlocks.Content,null))},deprecated:b})},184:(e,t)=>{var o;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var l=typeof o;if("string"===l||"number"===l)e.push(o);else if(Array.isArray(o)){if(o.length){var i=r.apply(null,o);i&&e.push(i)}}else if("object"===l){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var s in o)a.call(o,s)&&o[s]&&e.push(s)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()}},o={};function a(e){var r=o[e];if(void 0!==r)return r.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,o,r,l)=>{if(!o){var i=1/0;for(b=0;b<e.length;b++){for(var[o,r,l]=e[b],s=!0,c=0;c<o.length;c++)(!1&l||i>=l)&&Object.keys(a.O).every((e=>a.O[e](o[c])))?o.splice(c--,1):(s=!1,l<i&&(i=l));if(s){e.splice(b--,1);var m=r();void 0!==m&&(t=m)}}return t}l=l||0;for(var b=e.length;b>0&&e[b-1][2]>l;b--)e[b]=e[b-1];e[b]=[o,r,l]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var r,l,[i,s,c]=o,m=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var b=c(a)}for(t&&t(o);m<i.length;m++)l=i[m],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(b)},o=globalThis.webpackChunkbook_review_block=globalThis.webpackChunkbook_review_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=a.O(void 0,[431],(()=>a(723)));r=a.O(r)})();